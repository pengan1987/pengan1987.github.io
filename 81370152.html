<html><head><title>为旧型Mac电脑配置支持OS 9的网络启动</title></head><body><h1>为旧型Mac电脑配置支持OS 9的网络启动</h1><p>作者：蓬岸 Dr.Quest<br>知乎文章编号：81370152<br>创建于：2019-09-05 12:42:24<br>修改于：2019-09-05 12:42:24</p><hr><p data-pid="rqcN0Wi4">近期 <a href="https://zhuanlan.zhihu.com/classicMac" class="internal">老Mac与MacOS收藏</a> 专栏中介绍了若干种为G3/G4/G5老式苹果电脑安装系统的办法，但是在许多情况下，使用网络安装仍可能是唯一可行的办法——因为那些上了年头的老Mac们对当下的环境未必那么友好：无论是老化挑盘的光驱、越来越难找的火线硬盘、以及对U盘的挑三拣四，以及大多数机型上USB 1.1接口的缓慢速度，都时常让爱好者们头疼不已，而网络安装环境虽然配置门槛较高，但一旦配置完成就非常稳定，特别是在需要配置多台不同型号的机器时非常实用。</p><p data-pid="8tPOvefo"><a href="https://zhuanlan.zhihu.com/classicMac" class="internal">老Mac与MacOS收藏</a> 的作者排长写过一篇 <a href="https://zhuanlan.zhihu.com/p/39452286" class="internal">paizhangpi：BootMania服务器端配置并网络启动旧款Mac电脑</a> 的帖子中介绍了使用BootMania配置苹果NetBoot安装Mac OS X的步骤，而安装OS 9也同样可以利用网络启动来完成，这一篇文章是我配置NetBoot启动OS 9的一些笔记，内容比较杂乱，请各位读者包涵。</p><h2>首先，你需要一个Mac OS X 10.4环境</h2><p data-pid="5ycfocV5">排长的文章中使用了一台Powerbook作为服务器，但是对于没有PowerPC苹果电脑的玩家来说，使用可以运行Mac OS X 10.4的X86苹果电脑也是可以作为网络启动服务器的，同样的使用Virtualbox制作Mac OS X 10.4虚拟机也可以实现类似的效果（需要将网卡设置为桥接模式）。</p><p data-pid="hzNnJgea">我强烈建议使用OS X 10.4（无论是否是server版）作为服务器环境，我曾经试用10.6 Server作为服务器，但无法正常启动客户机。</p><p data-pid="OhmJIIL4">在VirtualBox上安装Mac OS X 10.4的操作说明可以看这里</p><a href="https://github.com/ranma42/TigerOnVBox" data-draft-node="block" data-draft-type="link-card" data-image="https://pic2.zhimg.com/v2-961304f41fb1155af66eff2af71ee699_ipico.jpg" data-image-width="420" data-image-height="420" class=" wrap external" target="_blank" rel="nofollow noreferrer">ranma42/TigerOnVBox</a><p data-pid="rEjCsdUy">而Mac OS X 10.4的安装盘则可以在  <a href="http://www.macintoshrepository.org/" class=" wrap external" target="_blank" rel="nofollow noreferrer">Old Mac Software Archive - Macintosh Repository</a>或 <a href="http://macintoshgarden.org/" class=" wrap external" target="_blank" rel="nofollow noreferrer">Macintosh Garden - Celebrating Macintosh Abandonware!</a> 找到。</p><h2><b>安装BootMania</b></h2><p data-pid="GW1lgVT3">在排长的帖子中已经比较详尽的介绍了BootMania的安装方法</p><a href="https://zhuanlan.zhihu.com/p/39452286" data-draft-node="block" data-draft-type="link-card" data-image="https://pic4.zhimg.com/v2-3f01082b38e4a3639808e85332ceb2e3_180x120.jpg" data-image-width="4096" data-image-height="3072" class="internal">paizhangpi：BootMania服务器端配置并网络启动旧款Mac电脑</a><h2>制作Mac OS X安装镜像</h2><p data-pid="PGLP_fl-">Mac OS X的安装镜像比较容易制作，使用BootMania内置的镜像创建功能即可，不过需要注意的是Mac OS X 10.2和10.3都会用到多张CD，所以中途会提示你换盘，如果是虚拟机的话，注意要从Finder中将光盘弹出，再在虚拟机上挂载下一张光盘。</p><figure data-size="normal"><img src="https://pic4.zhimg.com/v2-411868ee35e8b4db10f52c49016c99c3_b.jpg" data-caption="" data-size="normal" data-rawwidth="801" data-rawheight="473" class="origin_image zh-lightbox-thumb" width="801" data-original="https://pic4.zhimg.com/v2-411868ee35e8b4db10f52c49016c99c3_r.jpg" data-original-token="v2-411868ee35e8b4db10f52c49016c99c3"/></figure><p data-pid="bV7yRtBw">直到镜像制作完成，制作完成后，你会在镜像列表中看到制作好的镜像。</p><h2>准备Mac OS 9启动镜像</h2><p data-pid="w-u86Hry">这是之前排长的文章里没有提到的一点，BootMania是可以启动Mac OS 9的，在进入网络启动的OS 9环境之后，可以通过网络启动挂载AFP共享文件夹，并进一步安装其他OS 9系统，比如这篇文章里提到的通用OS 9恢复盘。</p><a href="https://zhuanlan.zhihu.com/p/78916170" data-draft-node="block" data-draft-type="link-card" class="internal">osnine：封装Mac OS 9并制作恢复盘</a><p data-pid="AhLOyVfa">OS 9的网络启动镜像并不能直接通过BootMania制作，好在苹果官方提供了英文和日文的OS9启动镜像</p><a href="https://support.apple.com/kb/DL1192?locale=en_US" data-draft-node="block" data-draft-type="link-card" class=" wrap external" target="_blank" rel="nofollow noreferrer">NetBoot for Mac OS 9: Information and Download</a><p data-pid="FPNAglj3">下载完成之后是一个标准的dmg磁盘镜像，先关闭BootMania，再安装NetBoot9.dmg里面的NetBoot.pkg就可以把OS 9的网络启动镜像复制到本机了。再次打开BootMania，就会发现启动的镜像里面多了一个MacOS92Default镜像，这就是标准的Mac OS 9启动镜像。</p><figure data-size="normal"><img src="https://pic1.zhimg.com/v2-3bfc0e391e0248cb873e7e988c16a160_b.jpg" data-caption="" data-size="normal" data-rawwidth="802" data-rawheight="470" class="origin_image zh-lightbox-thumb" width="802" data-original="https://pic1.zhimg.com/v2-3bfc0e391e0248cb873e7e988c16a160_r.jpg" data-original-token="v2-3bfc0e391e0248cb873e7e988c16a160"/></figure><h2>启动前的最后配置</h2><p data-pid="EofMz4Vd">在BootMania的首选项中，配置好DHCP服务器，然后就可以准备网络启动了。但为了保证网络启动的成功率，需要注意以下几点：</p><p data-pid="nZAaQnbH">1、使用WiFi作为NetBoot可能会有若干不稳定因素，首选有线网卡做网络启动（如图中的en0）</p><figure data-size="normal"><img src="https://pic2.zhimg.com/v2-e90fe2fa79f422b79b60df8b73fcf959_b.jpg" data-caption="" data-size="normal" data-rawwidth="800" data-rawheight="471" class="origin_image zh-lightbox-thumb" width="800" data-original="https://pic2.zhimg.com/v2-e90fe2fa79f422b79b60df8b73fcf959_r.jpg" data-original-token="v2-e90fe2fa79f422b79b60df8b73fcf959"/></figure><p data-pid="ly9s1--H">2、如果使用虚拟机的话，注意虚拟机网卡桥接到有线网卡</p><figure data-size="normal"><img src="https://pic4.zhimg.com/v2-2cee8718d422db75219c19c3131efaa7_b.jpg" data-caption="" data-size="normal" data-rawwidth="646" data-rawheight="490" class="origin_image zh-lightbox-thumb" width="646" data-original="https://pic4.zhimg.com/v2-2cee8718d422db75219c19c3131efaa7_r.jpg" data-original-token="v2-2cee8718d422db75219c19c3131efaa7"/></figure><p data-pid="qfC-bEdW">3、请不要将网线连接到任何带有DHCP功能的设备上（如家用路由器或无线路由器），将服务器与客户机使用单个集线器或交换机连接（推荐，这样服务器的网卡状态一直是连接的）。或直接使用网线直连两台电脑。</p><h2>使用网络启动电脑</h2><p data-pid="Ac0N3ZeH">将准备网络启动的Mac电脑连接到服务器，然后开机的时候按下“Option”键，这时客户机会尝试从服务器的DHCP服务获得IP地址，并尝试搜索服务器上的NetBoot镜像，在服务器的系统日志中也可以看到请求的详情。</p><figure data-size="normal"><img src="https://pic1.zhimg.com/v2-0a6072f3604d934b9e8ef6e9b0ed1f48_b.jpg" data-caption="" data-size="normal" data-rawwidth="801" data-rawheight="472" class="origin_image zh-lightbox-thumb" width="801" data-original="https://pic1.zhimg.com/v2-0a6072f3604d934b9e8ef6e9b0ed1f48_r.jpg" data-original-token="v2-0a6072f3604d934b9e8ef6e9b0ed1f48"/></figure><p data-pid="D5VVkOI7">如果服务器运作正常，你会看到网络启动选项显示在客户机的启动选项里，如果服务器端配置了多个启动镜像，客户端也会有多个启动镜像可选，如果是OS X的安装镜像，那么接下来就可以像使用光盘启动一样安装系统了，但如果是OS 9的话，还需要看下一节。</p><figure data-size="normal"><img src="https://pic2.zhimg.com/v2-b4cd03e4af51ecde662cc136615f30c9_b.jpg" data-caption="" data-size="normal" data-rawwidth="500" data-rawheight="375" class="origin_image zh-lightbox-thumb" width="500" data-original="https://pic2.zhimg.com/v2-b4cd03e4af51ecde662cc136615f30c9_r.jpg" data-original-token="v2-b4cd03e4af51ecde662cc136615f30c9"/></figure><h2>关于OS 9网络启动的特别说明</h2><p data-pid="82Yl4-dA">苹果提供的OS 9镜像启动后会询问用户名和密码，使用</p><p data-pid="s5zdYbuZ">用户名：NBuser</p><p data-pid="oxErXRHP">密码：netboot</p><p data-pid="mcSgkwk9">登陆后就可以看到OS 9的主界面了，这时客户机还不能访问服务器端的文件，需要使用Network Browser将服务器端的afp共享（BootMania会自动启动共享）挂载到客户机上。点击苹果菜单，选Network Browser，再点击手指图案，选Connect to server，输入服务器的IP地址，即可在客户端访问服务器端的文件。</p><figure data-size="normal"><img src="https://pic4.zhimg.com/v2-95726afd8975bc4d14b56bb196d1a7cb_b.jpg" data-caption="" data-size="normal" data-rawwidth="366" data-rawheight="278" class="content_image" width="366" data-original-token="v2-95726afd8975bc4d14b56bb196d1a7cb"/></figure><p data-pid="dHJeSMOy">如果要使用网络启动的OS 9环境安装OS 9系统，可能你会发现OS 9提供的Disk Copy工具无法挂载OS X环境中的dmg镜像，一个可行的办法是使用OS 9的磁盘工具创建一个空的.img格式的镜像，再使用OS X服务器端的磁盘工具同同时挂载.dmg镜像和.img镜像，利用镜像恢复功能将dmg的内容复制到img镜像中，就可以在OS 9环境下顺利挂载了。</p><h2>结语</h2><p data-pid="A1SPLQNS">这篇文章的来历，是我为了恢复一台2003款iBook G3的Mac OS 9环境。这台iBook G3目前放在中关村创业博物馆的体验区里，是国内为数不多的可供爱好者们体验的Mac OS 9实机。如果各位有兴趣的话，可以去实际体验一下。</p><a class="video-box" href="https://www.zhihu.com/video/1153147059740729344" target="_blank" data-video-id="" data-video-playable="true" data-name="在iBook G3上玩星际" data-poster="https://pic3.zhimg.com/v2-a035e6a1d034165ff81d43bbb3be2472.jpg" data-lens-id="1153147059740729344"><img class="thumbnail" src="https://pic3.zhimg.com/v2-a035e6a1d034165ff81d43bbb3be2472.jpg"/><span class="content"><span class="title">在iBook G3上玩星际<span class="z-ico-extern-gray"></span><span class="z-ico-extern-blue"></span></span><span class="url"><span class="z-ico-video"></span>https://www.zhihu.com/video/1153147059740729344</span></span></a><p></p></body></html>